# Do not modify!
# This file was generated from a template using https://github.com/StefMa/pkl-gha

name: PR Test Reports
'on':
  workflow_run:
    types:
    - completed
    workflows:
    - Pull Request
permissions:
  contents: read
jobs:
  test-results:
    name: Test Results
    if: github.event.workflow_run.conclusion == 'success' || github.event.workflow_run.conclusion == 'failure'
    permissions:
      actions: read
      checks: write
    runs-on: ubuntu-latest
    steps:
    - name: Download artifacts
      uses: dawidd6/action-download-artifact@v11
      with:
        path: artifacts
        name: test-results-.*
        name_is_regex: true
        run_id: ${{ github.event.workflow_run.id }}
    - name: Publish test results
      uses: EnricoMi/publish-unit-test-result-action@v2
      with:
        commit: ${{ github.event.workflow_run.head_sha }}
        comment_mode: 'off'
        files: artifacts/**/*.xml
        event_file: artifacts/test-results-event-file/event.json
        event_name: ${{ github.event.workflow_run.event }}
